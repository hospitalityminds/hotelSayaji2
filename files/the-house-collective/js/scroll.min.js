var housePin,expPin,expTween,expTweenM,expHzScroll,triggerDivH,scrollPx,scrollPxM,exphzWrapperW,househzWrapperH,controller=new ScrollMagic.Controller,homeAnchorArr=[],houseWrapperPinArr=[];function us(){ww=$(window).width(),wh=$(window).height(),ws=$(window).scrollTop()}function checkResize(){us()}function showAnchor(){ws>wh/2?$(".anchor").addClass("reveal"):ws<=wh/2&&$(".anchor").removeClass("reveal")}function pgAnchorControl(){for(var e=$(".page--home .anchor__nav"),r=0;r<e.length;r++){let o,n=$(e[r]).attr("id");if("anchor-home-experiences"==n){let e=$(".exp-horizontal-wrapper").outerWidth()-ww+wh;o=new ScrollMagic.Scene({triggerElement:".home-"+r,duration:e}).setClassToggle(".anchor-"+r,"active").addTo(controller)}else o=new ScrollMagic.Scene({triggerElement:".home-"+r,duration:$(".home-"+r).outerHeight()}).setClassToggle(".anchor-"+r,"active").addTo(controller);o.id=n,homeAnchorArr.push(o)}}function homeFadeInX(){$(".page--home .fade-in-x").each((function(){var e=TweenMax.to($(this),1,{x:0,opacity:1,ease:Linear.easeInOut});new ScrollMagic.Scene({triggerElement:this,duration:300}).setTween(e).addTo(controller).triggerHook(.8)}))}function homeFadeInY(){$(".page--home .fade-in-y").each((function(){var e=TweenMax.to($(this),1,{y:0,opacity:1,ease:Linear.easeInOut});new ScrollMagic.Scene({triggerElement:this,duration:300}).setTween(e).addTo(controller).triggerHook(.8)}))}function homeFadeIn(){$(".page--home .fade-in").each((function(){var e=TweenMax.to($(this),1,{opacity:1,ease:Linear.easeInOut});new ScrollMagic.Scene({triggerElement:this,duration:500}).setTween(e).addTo(controller).triggerHook(.8)}))}function houseScrollAnimation2(){houseController=new ScrollMagic.Controller;let e=$(".houses-horizontal-wrapper").find(".houses-m-wrapper"),r=e.length;var o=e.outerHeight(),n=o*r+.5*o*r-o,t=o/2;housePin=new ScrollMagic.Scene({triggerElement:"#trigger-house",duration:n}).setPin(".home-houses__slider--img").addTo(houseController).triggerHook(0),$(".houses-m-wrapper").each((function(){var e=new TimelineMax,r=TweenMax.to($(this),1,{opacity:1,ease:Linear.easeInOut}),o=TweenMax.to($(this),1,{opacity:0,ease:Linear.easeInOut,delay:2});e.add(r).add(o),houseWrapperOpacity=new ScrollMagic.Scene({triggerElement:this,duration:1.5*wh}).setTween(e).addTo(houseController).triggerHook(.5)}));for(var i=0;i<r;i++){var a=new ScrollMagic.Scene({triggerElement:".houses-m-wrapper-"+i,duration:t}).setPin(".houses-m-wrapper-"+i).addTo(houseController).triggerHook(0);houseWrapperPinArr.push(a)}}function getExpPx(){let e=$(".exp-horizontal-wrapper");expitemW=e.find(".img-wrapper").outerWidth(!0),exphzWrapperW=e.outerWidth(),scrollPx=exphzWrapperW-ww,scrollPxM=exphzWrapperW-ww}$((function(){$(".page--home").length>0&&(us(),checkResize(),showAnchor(),getExpPx(),homeFadeInX(),homeFadeInY(),homeFadeIn(),ww>=768&&pgAnchorControl(),expFadeInTween=(new TimelineMax).add(TweenMax.to(".home-experiences .houses-content-wrapper",1,{opacity:1,left:"0px",ease:Linear.easeInOut})),expFadeIn=new ScrollMagic.Scene({triggerElement:"#trigger-exp",triggerHook:.7}).setTween(expFadeInTween).duration(500).addTo(controller),expPin=new ScrollMagic.Scene({triggerElement:"#trigger-exp",duration:scrollPx}).setPin(".home-experiences").addTo(controller).triggerHook(0),expTween=TweenMax.to(".exp-horizontal-wrapper",1,{css:{left:-$(".exp-horizontal-wrapper").outerWidth()+ww},ease:Linear.easeNone}),expHzScroll=new ScrollMagic.Scene({triggerElement:"#trigger-exp",triggerHook:0}).setTween(expTween).duration(scrollPx).addTo(controller),ww<768&&houseScrollAnimation2()),$(window).resize((function(){if($(".page--home").length>0){checkResize(),getExpPx();for(var e=0;e<homeAnchorArr.length;e++){if("anchor-home-experiences"==homeAnchorArr[e].id){let r=$(".exp-horizontal-wrapper").outerWidth()-ww+wh;homeAnchorArr[e].duration(r)}else homeAnchorArr[e].duration($(".home-"+e).outerHeight())}let t=$(".houses-horizontal-wrapper").find(".houses-m-wrapper"),i=t.length;var r=t.outerHeight(),o=r*i+.5*r*i-r,n=r/2;if($(".home-module").not("#home-experiences").each((function(){$(this).attr("id");triggerDivH=$(this).outerHeight()})),expPin.duration(scrollPx),expHzScroll.on("update",(function(e){expHzScroll.duration(scrollPx),expTween.progress(0),expTween.updateTo({css:{left:-$(".exp-horizontal-wrapper").outerWidth()+ww}},!0),expHzScroll.setTween(expTween)})),null!=housePin){housePin.duration(o);for(e=0;e<houseWrapperPinArr.length;e++)houseWrapperPinArr[e].duration(n)}ww<=768&&null==housePin?houseScrollAnimation2():ww>768&&null!=housePin&&(houseController.destroy(!0),housePin=null,houseWrapperPin=null,houseWrapperOpacity=null),ww>=768&&0==homeAnchorArr.length&&pgAnchorControl()}})),$(window).scroll((function(){$(".page--home").length>0&&showAnchor()}))}));