var distance,kaleidoscope;function is_touch_device4(){var t=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||function(t){return window.matchMedia(t).matches}(["(",t.join("touch-enabled),("),"heartz",")"].join(""))}function us(){ww=$(window).width(),wh=$(window).height(),ws=$(window).scrollTop()}function checkResize(){us()}function formatChineseCalendar(){setTimeout((function(){$(".t-month").each((function(){let t=$(this).text();t=t.split(" ");let e=t[1]+"年"+t[0];$(this).text(e)}))}),1)}function getDistance(){let t=$(window).width()/2,e=$(window).height()/2,n=t-$(".home-house .house-wrapper").offset().left,i=e-$(".home-house .house-wrapper").position().top;distance=Math.hypot(n,i)}function share(){$(".share .share__list").length&&$.each($(".share .share__list li a"),(function(t,e){let n=$(e);if(n.children("svg").length)switch(n.children("svg").attr("data-icon")){case"weibo":n.attr("href","http://service.weibo.com/share/share.php?url="+encodeURI(document.location)+"&appkey=&title="+encodeURI(document.title)+"&pic=&ralateUid=&language=zh_cn");break;case"envelope":n.attr("href","mailto:?subject="+document.title+"&body="+encodeURI(document.location));break;case"linkedin-in":n.attr("href","https://www.linkedin.com/sharing/share-offsite/?url="+encodeURI(document.location))}}))}$((function(){checkResize(),share();let t=[];t.en=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],t["zh-hk"]=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],t["zh-cn"]=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"];let e=[];e.en=["MO","TU","WE","TH","FR","SA","SU"],e["zh-hk"]=["一","二","三","四","五","六","日"],e["zh-cn"]=["一","二","三","四","五","六","日"];let n=[];n.en=["night"],n["zh-hk"]=["晚"],n["zh-cn"]=["晚"];let i=[];i.en=["nights"],i["zh-hk"]=["晚"],i["zh-cn"]=["晚"];var o=new Date,a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),s=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()+1);if($(".t-datepicker").closest(".form-widget").length>0&&$(".form-widget--booking .t-datepicker").tDatePicker({titleCheckIn:"",titleCheckOut:"",titleDateRange:n[lang],titleDateRanges:i[lang],iconArrowTop:!1,iconDate:"",formatDate:"yyyy-mm-dd",showDateTheme:"mm-dd-yyyy",toDayShowTitle:!1,dateCheckIn:a,dateCheckOut:s,titleDays:e[lang],titleMonths:t[lang],numCalendar:2}).on("selectedCI",(function(t,e){let n=new Date(e),i=(n.getFullYear(),n.getMonth()+1),o=n.getDate();i<10&&(i="0"+i),o<10&&(o="0"+o);"zh-hk"!=lang&&"zh-cn"!=lang||formatChineseCalendar()})).on("selectedCO",(function(t,e){let n=new Date(e),i=(n.getFullYear(),n.getMonth()+1),o=n.getDate();i<10&&(i="0"+i),o<10&&(o="0"+o);"zh-hk"!=lang&&"zh-cn"!=lang||formatChineseCalendar(),trackingBookingUpdate($(this))})).on("afterShowDay",(function(){"zh-hk"!=lang&&"zh-cn"!=lang||(formatChineseCalendar(),$(".t-next, .t-prev").unbind("click").click((function(){formatChineseCalendar()})))})),$(".t-datepicker").closest(".booking-panel").length>0&&$(".booking-panel .t-datepicker").tDatePicker({titleCheckIn:"",titleCheckOut:"",titleDateRange:n[lang],titleDateRanges:i[lang],iconArrowTop:!1,iconDate:"",formatDate:"yyyy-mm-dd",showDateTheme:"mm-dd-yyyy",toDayShowTitle:!1,dateCheckIn:a,dateCheckOut:s,titleDays:e[lang],titleMonths:t[lang],numCalendar:2}).on("selectedCI",(function(t,e){let n=new Date(e),i=(n.getFullYear(),n.getMonth()+1),o=n.getDate();i<10&&(i="0"+i),o<10&&(o="0"+o);"zh-hk"!=lang&&"zh-cn"!=lang||formatChineseCalendar()})).on("selectedCO",(function(t,e){let n=new Date(e),i=(n.getFullYear(),n.getMonth()+1),o=n.getDate();i<10&&(i="0"+i),o<10&&(o="0"+o);"zh-hk"!=lang&&"zh-cn"!=lang||formatChineseCalendar(),trackingBookingUpdate($(this))})).on("afterShowDay",(function(){"zh-hk"!=lang&&"zh-cn"!=lang||(formatChineseCalendar(),$(".t-next, .t-prev").unbind("click").click((function(){formatChineseCalendar()})))})),$(".form-widget").click((function(){$(".t-datepicker").tDatePicker("hide")})),$(".form-widget .range-select-field").click((function(t){event.stopPropagation()})),$(".page--home").length>0){window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};let t,e,n,i,o,a,s,c;t=function(){function t(t){var e,n,i,o;for(e in this.options=null!=t?t:{},this.defaults={offsetRotation:90,offsetScale:1.1,offsetX:1.5,offsetY:1,radius:distance,slices:2,zoom:1.5},n=this.defaults)o=n[e],this[e]=o;for(e in i=this.options)o=i[e],this[e]=o;null==this.domElement&&(this.domElement=document.getElementById("canvas")),null==this.context&&(this.context=this.domElement.getContext("2d")),null==this.image&&(this.image=document.getElementById("canvas-img"))}return t.prototype.HALF_PI=Math.PI/2,t.prototype.TWO_PI=2*Math.PI,getDistance(),t.prototype.draw=function(){var t,e,n,i,o,a,s;for(this.domElement.width=this.domElement.height=2*this.radius,this.context.fillStyle=this.context.createPattern(this.image,"repeat"),a=this.zoom*(this.radius/Math.min(this.image.width,this.image.height)),s=this.TWO_PI/this.slices,t=this.image.width/2,o=[],n=e=0,i=this.slices;0<=i?e<=i:e>=i;n=0<=i?++e:--e)this.context.save(),this.context.translate(this.radius,this.radius),this.context.rotate(n*s),this.context.beginPath(),this.context.moveTo(-.5,-.5),this.context.arc(0,0,this.radius,-.51*s,.51*s),this.context.lineTo(.5,.5),this.context.closePath(),this.context.rotate(this.HALF_PI),this.context.scale(a,a),this.context.scale([-1,1][n%2],1),this.context.translate(this.offsetX-t,this.offsetY),this.context.rotate(this.offsetRotation),this.context.scale(this.offsetScale,this.offsetScale),this.context.fill(),o.push(this.context.restore());return o},t.prototype.updateRadius=function(t){this.radius=t},t.prototype.updateVisual=function(){var t,e;o.interactive&&(t=a-this.offsetRotation,e=Math.atan2(Math.sin(t),Math.cos(t)),this.offsetX+=(s-this.offsetX)*o.ease,this.offsetY+=(c-this.offsetY)*o.ease,this.offsetRotation+=(e-this.offsetRotation)*o.ease,this.draw())},t}(),e=new Image,e.onload=function(){return n.draw()};var h=$("#canvas-img").attr("data-src");e.src=""+h,n=new t({image:e,slices:6}),n.domElement.style.position="absolute",n.domElement.style.marginLeft=-n.radius+"px",n.domElement.style.marginTop=-n.radius+"px",n.domElement.style.left="50%",n.domElement.style.top="50%",$(".canvas-wrapper").append(n.domElement),s=n.offsetX,c=n.offsetY,a=n.offsetRotation,o={interactive:!0,ease:.2},i=function(){return n.domElement.style.marginLeft=-n.radius+"px",n.domElement.style.marginTop=-n.radius+"px",o.interactive=!1,n.draw()},0==is_touch_device4()&&$(".home-house").bind("mousemove",(function(){let t=$(".home-house");var e,i,o;ws+wh>=t.offset().top&&ws<=t.offset().top+t.outerHeight()&&(t.innerWidth(),t.innerHeight(),e=event.clientX/t.innerWidth(),o=event.clientY/t.innerHeight()-.5,s=(i=e-.5)*n.radius*-.01,c=o*n.radius*.01,a=Math.atan2(o,i),n.updateVisual())})),$(window).scroll((function(){us();let t=$(".home-house");var e,i,o;ws+wh>=t.offset().top&&ws<=t.offset().top+t.outerHeight()&&(t.innerWidth(),t.innerHeight(),e=.5*ws/t.innerWidth(),o=.1*ws/t.innerHeight()-.5,s=(i=e-.5)*n.radius*-1,c=o*n.radius*1,a=Math.atan2(o,i),n.updateVisual())})),$(window).resize((function(){checkResize(),getDistance(),n.updateRadius(distance)}))}}));